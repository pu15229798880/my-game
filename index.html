<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‚æœºå‡çº§æ¸¸æˆ - ä¸­å›½åœ°å›¾è§£é”</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            text-align: center;
        }
        
        h1 {
            margin-bottom: 20px;
            color: #ffcc00;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            font-size: 2.5rem;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .stat-item {
            padding: 10px 20px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffcc00;
        }
        
        .buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 30px 0;
        }
        
        button {
            padding: 15px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }
        
        #clickBtn {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            box-shadow: 0 5px 15px rgba(255, 65, 108, 0.4);
        }
        
        #levelUpBtn {
            background: linear-gradient(to right, #11998e, #38ef7d);
            box-shadow: 0 5px 15px rgba(17, 153, 142, 0.4);
        }
        
        #autoBtn {
            background: linear-gradient(to right, #4A00E0, #8E2DE2);
            box-shadow: 0 5px 15px rgba(74, 0, 224, 0.4);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .progress-container {
            margin: 30px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
        }
        
        .progress-bar {
            height: 20px;
            background: #333;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #ffcc00, #ff9900);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .auto-status {
            margin-top: 20px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .history {
            margin-top: 30px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .history h3 {
            margin-bottom: 10px;
            color: #ffcc00;
        }
        
        .history-item {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer {
            margin-top: 20px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* åœ°å›¾åŒºåŸŸæ ·å¼ */
        .maps-section {
            margin-top: 30px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        .maps-section h3 {
            margin-bottom: 15px;
            color: #ffcc00;
        }
        
        .maps-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .map-card {
            width: 150px;
            height: 180px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .map-card.locked {
            filter: grayscale(1);
        }
        
        .map-card.unlocked {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.5);
        }
        
        .map-image {
            width: 100%;
            height: 100px;
            background-size: cover;
            background-position: center;
        }
        
        .map-info {
            padding: 10px;
        }
        
        .map-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .map-level {
            font-size: 0.8rem;
            color: #ffcc00;
        }
        
        .lock-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* ç®¡ç†å‘˜ç³»ç»Ÿæ ·å¼ */
        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .admin-panel {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .admin-panel h2 {
            color: #ffcc00;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .admin-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .admin-input {
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
        }
        
        .admin-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .admin-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-submit {
            background: linear-gradient(to right, #11998e, #38ef7d);
            color: white;
        }
        
        .admin-cancel {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            color: white;
        }
        
        .admin-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .admin-btn:active {
            transform: translateY(1px);
        }
        
        .admin-controls {
            margin-top: 20px;
            display: none;
        }
        
        .admin-controls h3 {
            color: #ffcc00;
            margin-bottom: 15px;
        }
        
        .admin-control-row {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .admin-control-label {
            flex: 1;
            text-align: left;
        }
        
        .admin-control-input {
            flex: 2;
            padding: 8px 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .admin-control-btn {
            flex: 1;
            padding: 8px 10px;
            border: none;
            border-radius: 5px;
            background: linear-gradient(to right, #4A00E0, #8E2DE2);
            color: white;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æŒ‚æœºå‡çº§æ¸¸æˆ - ä¸­å›½åœ°å›¾è§£é”</h1>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">ç­‰çº§</div>
                <div class="stat-value" id="level">1</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">ç»éªŒå€¼</div>
                <div class="stat-value" id="exp">0</div>
            </div>
        </div>
        
        <div class="progress-container">
            <div>å‡çº§è¿›åº¦: <span id="currentExp">0</span> / <span id="requiredExp">100</span></div>
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
        </div>
        
        <div class="buttons">
            <button id="clickBtn">ç‚¹å‡»è·å¾—ç»éªŒ (+20)</button>
            <button id="levelUpBtn" disabled>å‡çº§ (éœ€è¦100ç»éªŒ)</button>
            <button id="autoBtn">å¼€å¯æŒ‚æœºæ¨¡å¼</button>
        </div>
        
        <div class="auto-status" id="autoStatus">
            æŒ‚æœºæ¨¡å¼æœªå¼€å¯
        </div>
        
        <div class="maps-section">
            <h3>å·²è§£é”åœ°å›¾</h3>
            <div class="maps-container" id="mapsContainer">
                <!-- åœ°å›¾å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <div class="history">
            <h3>æ¸¸æˆè®°å½•</h3>
            <div id="historyLog"></div>
        </div>
        
        <footer>
            æ¸¸æˆè¿›åº¦ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ | æç¤ºï¼šè¿ç»­ç‚¹å‡»ç­‰çº§5æ¬¡å¯è¿›å…¥ç®¡ç†å‘˜æ¨¡å¼
        </footer>
    </div>

    <!-- ç®¡ç†å‘˜ç³»ç»Ÿ -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-panel">
            <h2>ç®¡ç†å‘˜ç³»ç»Ÿ</h2>
            <div class="admin-form" id="passwordForm">
                <input type="password" class="admin-input" id="adminPassword" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
                <div class="admin-buttons">
                    <button class="admin-btn admin-submit" id="adminSubmit">ç¡®è®¤</button>
                    <button class="admin-btn admin-cancel" id="adminCancel">å–æ¶ˆ</button>
                </div>
                <div id="adminMessage" style="margin-top: 15px; color: #ffcc00;"></div>
            </div>
            
            <div class="admin-controls" id="adminControls">
                <h3>å¼€å‘è€…è°ƒè¯•</h3>
                <div class="admin-control-row">
                    <div class="admin-control-label">å½“å‰ç­‰çº§:</div>
                    <input type="number" class="admin-control-input" id="adminLevel" min="1" max="100">
                    <button class="admin-control-btn" id="setLevelBtn">è®¾ç½®ç­‰çº§</button>
                </div>
                <div class="admin-control-row">
                    <div class="admin-control-label">å½“å‰ç»éªŒ:</div>
                    <input type="number" class="admin-control-input" id="adminExp" min="0" max="10000">
                    <button class="admin-control-btn" id="setExpBtn">è®¾ç½®ç»éªŒ</button>
                </div>
                <div class="admin-control-row">
                    <div class="admin-control-label">æ“ä½œ:</div>
                    <button class="admin-control-btn" id="resetGameBtn">é‡ç½®æ¸¸æˆ</button>
                    <button class="admin-control-btn" id="closeAdminBtn">å…³é—­é¢æ¿</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            level: 1,
            exp: 0,
            autoMode: false,
            history: [],
            unlockedMaps: [1] // åˆå§‹è§£é”ç¬¬ä¸€ä¸ªåœ°å›¾
        };

        // åœ°å›¾æ•°æ®
        const mapsData = [
            { id: 1, name: "é•¿åŸ", levelRequired: 1, image: "linear-gradient(135deg, #8B4513, #D2691E)", description: "ä¸‡é‡Œé•¿åŸï¼Œä¸­åæ–‡æ˜çš„è±¡å¾" },
            { id: 2, name: "å…µé©¬ä¿‘", levelRequired: 5, image: "linear-gradient(135deg, #654321, #8B4513)", description: "ç§¦å§‹çš‡é™µå…µé©¬ä¿‘ï¼Œä¸–ç•Œç¬¬å…«å¤§å¥‡è¿¹" },
            { id: 3, name: "æ•…å®«", levelRequired: 10, image: "linear-gradient(135deg, #B22222, #DC143C)", description: "ç´«ç¦åŸï¼Œæ˜æ¸…ä¸¤ä»£çš‡å®¶å®«æ®¿" },
            { id: 4, name: "é•¿æ±Ÿä¸‰å³¡", levelRequired: 15, image: "linear-gradient(135deg, #1E90FF, #4169E1)", description: "é•¿æ±Ÿä¸‰å³¡ï¼Œå£®ä¸½çš„è‡ªç„¶æ™¯è§‚" },
            { id: 5, name: "é»„å±±", levelRequired: 20, image: "linear-gradient(135deg, #228B22, #32CD32)", description: "é»„å±±ï¼Œå¤©ä¸‹ç¬¬ä¸€å¥‡å±±" },
            { id: 6, name: "æ•¦ç…Œè«é«˜çªŸ", levelRequired: 25, image: "linear-gradient(135deg, #DAA520, #F4A460)", description: "è«é«˜çªŸï¼Œä½›æ•™è‰ºæœ¯å®åº“" },
            { id: 7, name: "æ¡‚æ—å±±æ°´", levelRequired: 30, image: "linear-gradient(135deg, #2E8B57, #3CB371)", description: "æ¡‚æ—å±±æ°´ç”²å¤©ä¸‹" },
            { id: 8, name: "å¸ƒè¾¾æ‹‰å®«", levelRequired: 35, image: "linear-gradient(135deg, #800000, #B22222)", description: "å¸ƒè¾¾æ‹‰å®«ï¼Œä¸–ç•Œå±‹è„Šçš„æ˜ç " }
        ];

        // DOMå…ƒç´ 
        const levelElement = document.getElementById('level');
        const expElement = document.getElementById('exp');
        const currentExpElement = document.getElementById('currentExp');
        const requiredExpElement = document.getElementById('requiredExp');
        const progressBar = document.getElementById('progressBar');
        const clickBtn = document.getElementById('clickBtn');
        const levelUpBtn = document.getElementById('levelUpBtn');
        const autoBtn = document.getElementById('autoBtn');
        const autoStatus = document.getElementById('autoStatus');
        const historyLog = document.getElementById('historyLog');
        const mapsContainer = document.getElementById('mapsContainer');

        // ç®¡ç†å‘˜ç³»ç»ŸDOMå…ƒç´ 
        const adminOverlay = document.getElementById('adminOverlay');
        const adminPassword = document.getElementById('adminPassword');
        const adminSubmit = document.getElementById('adminSubmit');
        const adminCancel = document.getElementById('adminCancel');
        const adminMessage = document.getElementById('adminMessage');
        const passwordForm = document.getElementById('passwordForm');
        const adminControls = document.getElementById('adminControls');
        const adminLevel = document.getElementById('adminLevel');
        const adminExp = document.getElementById('adminExp');
        const setLevelBtn = document.getElementById('setLevelBtn');
        const setExpBtn = document.getElementById('setExpBtn');
        const resetGameBtn = document.getElementById('resetGameBtn');
        const closeAdminBtn = document.getElementById('closeAdminBtn');

        // ç®¡ç†å‘˜ç³»ç»Ÿå˜é‡
        let levelClickCount = 0;
        let levelClickTimeout;
        const ADMIN_PASSWORD = "831024";
        let autoInterval = null;

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ¸¸æˆçŠ¶æ€
            loadGame();
            
            // ç»‘å®šäº‹ä»¶
            clickBtn.addEventListener('click', () => addExp(20));
            levelUpBtn.addEventListener('click', levelUp);
            autoBtn.addEventListener('click', toggleAutoMode);
            
            // ç­‰çº§ç‚¹å‡»äº‹ä»¶ - ç®¡ç†å‘˜ç³»ç»Ÿå…¥å£
            levelElement.addEventListener('click', handleLevelClick);
            
            // ç®¡ç†å‘˜ç³»ç»Ÿäº‹ä»¶ç›‘å¬
            adminSubmit.addEventListener('click', checkAdminPassword);
            adminCancel.addEventListener('click', hideAdminPanel);
            setLevelBtn.addEventListener('click', setLevel);
            setExpBtn.addEventListener('click', setExp);
            resetGameBtn.addEventListener('click', resetGame);
            closeAdminBtn.addEventListener('click', hideAdminPanel);
            
            // æŒ‰Enteré”®æäº¤å¯†ç 
            adminPassword.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAdminPassword();
                }
            });
            
            // æ›´æ–°UI
            updateUI();
            renderMaps();
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ¸¸æˆçŠ¶æ€
        function loadGame() {
            const savedGame = localStorage.getItem('idleGame');
            if (savedGame) {
                const parsedGame = JSON.parse(savedGame);
                gameState.level = parsedGame.level || 1;
                gameState.exp = parsedGame.exp || 0;
                gameState.history = parsedGame.history || [];
                gameState.unlockedMaps = parsedGame.unlockedMaps || [1];
                
                // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
                updateHistory();
            }
        }

        // ä¿å­˜æ¸¸æˆçŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
        function saveGame() {
            localStorage.setItem('idleGame', JSON.stringify(gameState));
        }

        // æ›´æ–°UIæ˜¾ç¤º
        function updateUI() {
            levelElement.textContent = gameState.level;
            expElement.textContent = gameState.exp;
            currentExpElement.textContent = gameState.exp;
            requiredExpElement.textContent = getRequiredExp();
            
            // æ›´æ–°è¿›åº¦æ¡
            const progressPercent = (gameState.exp / getRequiredExp()) * 100;
            progressBar.style.width = `${Math.min(progressPercent, 100)}%`;
            
            // æ›´æ–°å‡çº§æŒ‰é’®çŠ¶æ€
            levelUpBtn.disabled = gameState.exp < getRequiredExp();
            levelUpBtn.textContent = gameState.exp >= getRequiredExp() 
                ? `å‡çº§ (æ¶ˆè€—${getRequiredExp()}ç»éªŒ)` 
                : `å‡çº§ (éœ€è¦${getRequiredExp()}ç»éªŒ)`;
                
            // æ›´æ–°æŒ‚æœºæŒ‰é’®çŠ¶æ€
            autoBtn.textContent = gameState.autoMode ? 'å…³é—­æŒ‚æœºæ¨¡å¼' : 'å¼€å¯æŒ‚æœºæ¨¡å¼';
            autoStatus.textContent = gameState.autoMode 
                ? 'æŒ‚æœºæ¨¡å¼è¿è¡Œä¸­... æ¯ç§’è·å¾—5ç‚¹ç»éªŒ' 
                : 'æŒ‚æœºæ¨¡å¼æœªå¼€å¯';
        }

        // è®¡ç®—å½“å‰ç­‰çº§éœ€è¦çš„ç»éªŒå€¼
        function getRequiredExp() {
            return 100; // æ¯çº§å›ºå®šéœ€è¦100ç»éªŒ
        }

        // æ·»åŠ ç»éªŒ
        function addExp(amount) {
            gameState.exp += amount;
            addToHistory(`è·å¾—äº† ${amount} ç‚¹ç»éªŒ`);
            updateUI();
            saveGame();
        }

        // å‡çº§
        function levelUp() {
            if (gameState.exp >= getRequiredExp()) {
                const oldLevel = gameState.level;
                gameState.exp -= getRequiredExp();
                gameState.level++;
                addToHistory(`å‡çº§åˆ° ${gameState.level} çº§ï¼`);
                
                // æ£€æŸ¥æ˜¯å¦æœ‰æ–°åœ°å›¾è§£é”
                checkMapUnlocks(oldLevel);
                
                updateUI();
                renderMaps();
                saveGame();
            }
        }

        // æ£€æŸ¥åœ°å›¾è§£é”
        function checkMapUnlocks(oldLevel) {
            mapsData.forEach(map => {
                // å¦‚æœç©å®¶è¾¾åˆ°åœ°å›¾æ‰€éœ€ç­‰çº§ï¼Œå¹¶ä¸”ä¹‹å‰æ²¡æœ‰è§£é”
                if (gameState.level >= map.levelRequired && 
                    oldLevel < map.levelRequired && 
                    !gameState.unlockedMaps.includes(map.id)) {
                    
                    gameState.unlockedMaps.push(map.id);
                    addToHistory(`è§£é”äº†æ–°åœ°å›¾: ${map.name}ï¼`);
                }
            });
        }

        // æ¸²æŸ“åœ°å›¾å¡ç‰‡
        function renderMaps() {
            mapsContainer.innerHTML = '';
            
            mapsData.forEach(map => {
                const isUnlocked = gameState.unlockedMaps.includes(map.id);
                const mapCard = document.createElement('div');
                mapCard.className = `map-card ${isUnlocked ? 'unlocked' : 'locked'}`;
                
                mapCard.innerHTML = `
                    <div class="map-image" style="background: ${map.image}"></div>
                    <div class="map-info">
                        <div class="map-name">${map.name}</div>
                        <div class="map-level">éœ€è¦ç­‰çº§: ${map.levelRequired}</div>
                    </div>
                    ${!isUnlocked ? '<div class="lock-icon">ğŸ”’</div>' : ''}
                `;
                
                mapsContainer.appendChild(mapCard);
            });
        }

        // åˆ‡æ¢æŒ‚æœºæ¨¡å¼
        function toggleAutoMode() {
            gameState.autoMode = !gameState.autoMode;
            
            if (gameState.autoMode) {
                addToHistory('å¼€å¯äº†æŒ‚æœºæ¨¡å¼');
                autoInterval = setInterval(() => {
                    addExp(5);
                }, 1000);
            } else {
                addToHistory('å…³é—­äº†æŒ‚æœºæ¨¡å¼');
                if (autoInterval) {
                    clearInterval(autoInterval);
                    autoInterval = null;
                }
            }
            
            updateUI();
        }

        // æ·»åŠ åˆ°å†å²è®°å½•
        function addToHistory(message) {
            const timestamp = new Date().toLocaleTimeString();
            gameState.history.unshift(`${timestamp}: ${message}`);
            
            // é™åˆ¶å†å²è®°å½•æ•°é‡
            if (gameState.history.length > 10) {
                gameState.history.pop();
            }
            
            updateHistory();
        }

        // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
        function updateHistory() {
            historyLog.innerHTML = '';
            gameState.history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.textContent = item;
                historyLog.appendChild(historyItem);
            });
        }

        // ç®¡ç†å‘˜ç³»ç»ŸåŠŸèƒ½
        function handleLevelClick() {
            levelClickCount++;
            
            // æ¸…é™¤ä¹‹å‰çš„è¶…æ—¶
            if (levelClickTimeout) {
                clearTimeout(levelClickTimeout);
            }
            
            // è®¾ç½®æ–°çš„è¶…æ—¶
            levelClickTimeout = setTimeout(() => {
                levelClickCount = 0;
            }, 2000); // 2ç§’å†…è¿ç»­ç‚¹å‡»
            
            // å¦‚æœè¿ç»­ç‚¹å‡»5æ¬¡ï¼Œæ˜¾ç¤ºç®¡ç†å‘˜é¢æ¿
            if (levelClickCount >= 5) {
                showAdminPanel();
                levelClickCount = 0;
            }
        }

        function showAdminPanel() {
            adminOverlay.style.display = 'flex';
            adminPassword.focus();
        }

        function hideAdminPanel() {
            adminOverlay.style.display = 'none';
            adminPassword.value = '';
            adminMessage.textContent = '';
            passwordForm.style.display = 'flex';
            adminControls.style.display = 'none';
            levelClickCount = 0;
        }

        function checkAdminPassword() {
            const password = adminPassword.value.trim();
            
            if (password === ADMIN_PASSWORD) {
                // å¯†ç æ­£ç¡®ï¼Œæ˜¾ç¤ºç®¡ç†å‘˜æ§åˆ¶é¢æ¿
                passwordForm.style.display = 'none';
                adminControls.style.display = 'block';
                
                // å¡«å……å½“å‰æ•°æ®
                adminLevel.value = gameState.level;
                adminExp.value = gameState.exp;
                
                addToHistory('è¿›å…¥äº†ç®¡ç†å‘˜æ¨¡å¼');
            } else {
                // å¯†ç é”™è¯¯
                adminMessage.textContent = 'å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ï¼';
                adminPassword.value = '';
                adminPassword.focus();
            }
        }

        function setLevel() {
            const newLevel = parseInt(adminLevel.value);
            if (newLevel >= 1 && newLevel <= 100) {
                const oldLevel = gameState.level;
                gameState.level = newLevel;
                
                // æ£€æŸ¥æ˜¯å¦æœ‰æ–°åœ°å›¾è§£é”
                checkMapUnlocks(oldLevel);
                
                updateUI();
                renderMaps();
                saveGame();
                
                adminMessage.textContent = `ç­‰çº§å·²è®¾ç½®ä¸º ${newLevel}`;
                
                addToHistory(`ç®¡ç†å‘˜å°†ç­‰çº§è®¾ç½®ä¸º ${newLevel}`);
            } else {
                adminMessage.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç­‰çº§ (1-100)';
            }
        }

        function setExp() {
            const newExp = parseInt(adminExp.value);
            if (newExp >= 0 && newExp <= 10000) {
                gameState.exp = newExp;
                updateUI();
                saveGame();
                
                adminMessage.textContent = `ç»éªŒå€¼å·²è®¾ç½®ä¸º ${newExp}`;
                
                addToHistory(`ç®¡ç†å‘˜å°†ç»éªŒå€¼è®¾ç½®ä¸º ${newExp}`);
            } else {
                adminMessage.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç»éªŒå€¼ (0-10000)';
            }
        }

        function resetGame() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ¸¸æˆå—ï¼Ÿæ‰€æœ‰è¿›åº¦å°†ä¸¢å¤±ï¼')) {
                gameState.level = 1;
                gameState.exp = 0;
                gameState.autoMode = false;
                gameState.history = [];
                gameState.unlockedMaps = [1];
                
                // æ¸…é™¤æŒ‚æœºå®šæ—¶å™¨
                if (autoInterval) {
                    clearInterval(autoInterval);
                    autoInterval = null;
                }
                
                updateUI();
                renderMaps();
                updateHistory();
                saveGame();
                
                adminMessage.textContent = 'æ¸¸æˆå·²é‡ç½®';
                
                addToHistory('ç®¡ç†å‘˜é‡ç½®äº†æ¸¸æˆ');
            }
        }

        // å¯åŠ¨æ¸¸æˆ
        initGame();
    </script>
</body>
</html>