<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‚æœºå‡çº§æ¸¸æˆ - ä¸­å›½åœ°å›¾è§£é”</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 15px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            transition: all 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
        }
        
        .container {
            max-width: 95%;
            width: 100%;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 
                0 15px 30px rgba(0, 0, 0, 0.25),
                0 0 0 1px rgba(255, 255, 255, 0.2);
            text-align: center;
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.25);
            animation: containerAppear 1s ease-out;
            margin: 10px 0;
        }

        @keyframes containerAppear {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        h1 {
            margin-bottom: 15px;
            color: #ffcc00;
            text-shadow: 0 2px 8px rgba(255, 204, 0, 0.5);
            font-size: 2.2rem;
            font-weight: 800;
            letter-spacing: 0.5px;
            background: linear-gradient(135deg, #ffcc00, #ff9900);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            line-height: 1.2;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ffcc00, transparent);
            border-radius: 2px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 16px;
            box-shadow: 
                inset 0 2px 8px rgba(0, 0, 0, 0.2),
                0 4px 12px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .stats::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
            transition: left 0.6s;
        }

        .stats:hover::before {
            left: 100%;
        }
        
        .stat-item {
            padding: 10px 15px;
            position: relative;
        }
        
        .stat-label {
            margin-bottom: 8px;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #ffcc00;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 8px 15px;
            border-radius: 12px;
            user-select: none;
            text-shadow: 0 0 12px rgba(255, 204, 0, 0.7);
            background: rgba(255, 204, 0, 0.1);
            border: 1px solid rgba(255, 204, 0, 0.3);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .stat-value::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s;
        }
        
        .stat-value:hover {
            background: rgba(255, 204, 0, 0.15);
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(255, 204, 0, 0.3);
        }
        
        .stat-value:hover::before {
            left: 100%;
        }
        
        .buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 25px 0;
        }
        
        /* iOSé£æ ¼é€æ˜ç»ç’ƒæŒ‰é’® */
        .ios-glass-button {
            position: relative;
            padding: 16px 20px;
            border: none;
            border-radius: 18px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            color: white;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.18);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.25);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        /* æŒ‰é’®å…‰æ•ˆå±‚ */
        .ios-glass-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.6),
                transparent
            );
            transition: left 0.7s;
        }
        
        /* æŒ‰é’®æŒ‰ä¸‹æ•ˆæœ - iOSé£æ ¼ */
        .ios-glass-button:active {
            transform: scale(0.94) translateY(2px);
            box-shadow: 
                0 4px 15px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                inset 0 -1px 0 rgba(0, 0, 0, 0.3);
            transition: all 0.1s ease;
            background: rgba(255, 255, 255, 0.15);
        }
        
        .ios-glass-button:active::before {
            left: 100%;
            transition: left 0.2s;
        }
        
        /* æŒ‰é’®æ‚¬åœæ•ˆæœ */
        .ios-glass-button:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 15px 30px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.3),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        }
        
        /* ä¸åŒæŒ‰é’®çš„é¢œè‰² */
        #clickBtn {
            background: linear-gradient(135deg, rgba(255, 65, 108, 0.25), rgba(255, 75, 43, 0.25));
        }
        
        #levelUpBtn {
            background: linear-gradient(135deg, rgba(17, 153, 142, 0.25), rgba(56, 239, 125, 0.25));
        }
        
        #autoLevelUpBtn {
            background: linear-gradient(135deg, rgba(255, 140, 0, 0.25), rgba(255, 69, 0, 0.25));
        }
        
        #autoBtn {
            background: linear-gradient(135deg, rgba(74, 0, 224, 0.25), rgba(142, 45, 226, 0.25));
        }
        
        #rechargeBtn {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.25), rgba(255, 165, 0, 0.25));
        }
        
        #backpackBtn {
            background: linear-gradient(135deg, rgba(75, 0, 130, 0.25), rgba(138, 43, 226, 0.25));
        }
        
        #withdrawBtn {
            background: linear-gradient(135deg, rgba(0, 200, 83, 0.25), rgba(76, 175, 80, 0.25));
        }
        
        /* ç¦ç”¨çŠ¶æ€ */
        .ios-glass-button:disabled {
            background: rgba(100, 100, 100, 0.3);
            cursor: not-allowed;
            transform: none;
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .ios-glass-button:disabled::before {
            display: none;
        }
        
        .ios-glass-button:disabled:active {
            transform: none;
            box-shadow: 
                0 4px 12px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .progress-container {
            margin: 25px 0;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 16px;
            padding: 15px;
            box-shadow: 
                inset 0 2px 8px rgba(0, 0, 0, 0.2),
                0 4px 12px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        
        .progress-bar {
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 12px;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #ffcc00, #ff9900, #ff6600);
            width: 0%;
            transition: width 0.7s cubic-bezier(0.22, 0.61, 0.36, 1);
            position: relative;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.4);
        }

        .progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            font-size: 0.9rem;
        }
        
        .auto-status {
            margin-top: 20px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 12px;
            font-size: 1rem;
            box-shadow: 
                inset 0 2px 8px rgba(0, 0, 0, 0.2),
                0 4px 12px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        .auto-status.active {
            background: rgba(56, 239, 125, 0.15);
            box-shadow: 
                inset 0 2px 8px rgba(0, 0, 0, 0.2),
                0 4px 12px rgba(56, 239, 125, 0.25);
            border: 1px solid rgba(56, 239, 125, 0.3);
        }
        
        .history {
            margin-top: 25px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 16px;
            max-height: 150px;
            overflow-y: auto;
            box-shadow: 
                inset 0 2px 8px rgba(0, 0, 0, 0.2),
                0 4px 12px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        
        .history h3 {
            margin-bottom: 12px;
            color: #ffcc00;
            font-size: 1.3rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .history-item {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .history-item:hover {
            background: rgba(255, 255, 255, 0.08);
            padding-left: 8px;
        }
        
        footer {
            margin-top: 20px;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            line-height: 1.4;
        }
        
        /* åœ°å›¾åŒºåŸŸæ ·å¼ */
        .maps-section {
            margin-top: 25px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 16px;
            box-shadow: 
                inset 0 2px 8px rgba(0, 0, 0, 0.2),
                0 4px 12px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }
        
        .maps-section h3 {
            margin-bottom: 15px;
            color: #ffcc00;
            font-size: 1.3rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .maps-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
        }
        
        /* iOSé£æ ¼é€æ˜ç»ç’ƒåœ°å›¾å¡ç‰‡ */
        .ios-map-card {
            width: 140px;
            height: 170px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            cursor: pointer;
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            box-shadow: 
                0 8px 20px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.25),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.25);
        }
        
        .ios-map-card.locked {
            filter: grayscale(1) brightness(0.7);
            cursor: not-allowed;
        }
        
        .ios-map-card.unlocked {
            transform: scale(1.05);
            box-shadow: 
                0 12px 25px rgba(255, 204, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.25),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        }
        
        .ios-map-card.active {
            box-shadow: 
                0 0 0 2px #ffcc00,
                0 12px 25px rgba(255, 204, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.25);
            transform: scale(1.08);
        }
        
        .ios-map-card:hover:not(.locked) {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 
                0 15px 30px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.25);
        }
        
        .ios-map-card:active:not(.locked) {
            transform: scale(0.98);
            transition: transform 0.1s;
        }
        
        .map-image {
            width: 100%;
            height: 90px;
            background-size: cover;
            background-position: center;
            transition: all 0.5s ease;
        }

        .ios-map-card:hover .map-image {
            transform: scale(1.1);
        }
        
        .map-info {
            padding: 12px;
        }
        
        .map-name {
            font-weight: bold;
            margin-bottom: 6px;
            font-size: 1rem;
        }
        
        .map-level {
            font-size: 0.8rem;
            color: #ffcc00;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .lock-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.2rem;
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
        }
        
        /* iOSé£æ ¼ç®¡ç†å‘˜ç³»ç»Ÿ */
        .admin-overlay, .recharge-overlay, .backpack-overlay, .withdraw-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 15px;
            overflow-y: auto;
        }
        
        .admin-panel, .recharge-panel, .backpack-panel, .withdraw-panel {
            background: rgba(255, 255, 255, 0.2);
            padding: 25px;
            border-radius: 20px;
            width: 100%;
            max-width: 450px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(50px) saturate(180%);
            -webkit-backdrop-filter: blur(50px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .admin-panel h2, .recharge-panel h2, .backpack-panel h2, .withdraw-panel h2 {
            color: #ffcc00;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .admin-form, .recharge-form, .withdraw-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .admin-input, .recharge-input, .withdraw-input {
            padding: 12px 15px;
            border: none;
            border-radius: 14px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .admin-buttons, .recharge-buttons, .withdraw-buttons {
            display: flex;
            gap: 12px;
            margin-top: 12px;
        }
        
        .admin-controls {
            margin-top: 20px;
            display: none;
        }
        
        .admin-controls h3 {
            color: #ffcc00;
            margin-bottom: 15px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            font-size: 1.3rem;
        }
        
        .admin-control-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .admin-control-label {
            flex: 1 1 100%;
            text-align: left;
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.95rem;
        }
        
        .admin-control-input {
            flex: 1;
            min-width: 120px;
            padding: 10px 12px;
            border: none;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            font-size: 0.9rem;
        }
        
        .admin-message, .recharge-message, .withdraw-message {
            margin-top: 15px;
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            display: none;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.9rem;
        }
        
        .admin-success, .recharge-success, .withdraw-success {
            background: rgba(56, 239, 125, 0.25);
            color: #38ef7d;
            border: 1px solid rgba(56, 239, 125, 0.4);
        }
        
        .admin-error, .recharge-error, .withdraw-error {
            background: rgba(255, 65, 108, 0.25);
            color: #ff416c;
            border: 1px solid rgba(255, 65, 108, 0.4);
        }

        /* èƒŒåŒ…ç³»ç»Ÿæ ·å¼ */
        .backpack-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }
        
        .backpack-item {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .backpack-item:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.2);
        }
        
        .item-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .item-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .item-count {
            color: #ffcc00;
            font-size: 0.9rem;
        }

        /* æç°ä¿¡æ¯æ ·å¼ */
        .withdraw-info {
            background: rgba(255, 204, 0, 0.15);
            color: #ffcc00;
            border: 1px solid rgba(255, 204, 0, 0.3);
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                border-radius: 16px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .stat-value {
                font-size: 1.8rem;
            }
            
            .ios-map-card {
                width: 120px;
                height: 150px;
            }
            
            .map-image {
                height: 80px;
            }
            
            .admin-panel, .recharge-panel, .backpack-panel, .withdraw-panel {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 12px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .ios-map-card {
                width: 100px;
                height: 130px;
            }
            
            .map-image {
                height: 70px;
            }
            
            .map-name {
                font-size: 0.9rem;
            }
            
            .admin-control-row {
                flex-direction: column;
            }
            
            .admin-control-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æŒ‚æœºå‡çº§æ¸¸æˆ - ä¸­å›½åœ°å›¾è§£é”</h1>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">ç­‰çº§</div>
                <div class="stat-value" id="level">1</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">ç»éªŒå€¼</div>
                <div class="stat-value" id="exp">0</div>
            </div>
        </div>
        
        <div class="progress-container">
            <div>å‡çº§è¿›åº¦: <span id="currentExp">0</span> / <span id="requiredExp">100</span></div>
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
                <div class="progress-text" id="progressText">0%</div>
            </div>
        </div>
        
        <div class="buttons">
            <button class="ios-glass-button" id="clickBtn">ç‚¹å‡»è·å¾—ç»éªŒ (+20)</button>
            <button class="ios-glass-button" id="levelUpBtn" disabled>å‡çº§ (éœ€è¦100ç»éªŒ)</button>
            <button class="ios-glass-button" id="autoLevelUpBtn" disabled>ä¸€é”®å‡çº§</button>
            <button class="ios-glass-button" id="autoBtn">å¼€å¯æŒ‚æœºæ¨¡å¼</button>
            <button class="ios-glass-button" id="rechargeBtn">å……å€¼ç³»ç»Ÿ (648)</button>
            <button class="ios-glass-button" id="backpackBtn">èƒŒåŒ…ç³»ç»Ÿ</button>
            <button class="ios-glass-button" id="withdrawBtn">æç°åˆ°å¾®ä¿¡</button>
        </div>
        
        <div class="auto-status" id="autoStatus">
            æŒ‚æœºæ¨¡å¼æœªå¼€å¯
        </div>
        
        <div class="maps-section">
            <h3>å·²è§£é”åœ°å›¾</h3>
            <div class="maps-container" id="mapsContainer">
                <!-- åœ°å›¾å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <div class="history">
            <h3>æ¸¸æˆè®°å½•</h3>
            <div id="historyLog"></div>
        </div>
        
        <footer>
            æ¸¸æˆè¿›åº¦ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ | æç¤ºï¼šè¿ç»­ç‚¹å‡»ç­‰çº§5æ¬¡å¯è¿›å…¥ç®¡ç†å‘˜æ¨¡å¼
        </footer>
    </div>

    <!-- ç®¡ç†å‘˜ç³»ç»Ÿ -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-panel">
            <h2>ç®¡ç†å‘˜ç³»ç»Ÿ</h2>
            <div class="admin-form" id="passwordForm">
                <input type="password" class="admin-input" id="adminPassword" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç ">
                <div class="admin-buttons">
                    <button class="ios-glass-button admin-submit" id="adminSubmit">ç¡®è®¤</button>
                    <button class="ios-glass-button admin-cancel" id="adminCancel">å–æ¶ˆ</button>
                </div>
                <div class="admin-message" id="adminMessage"></div>
            </div>
            
            <div class="admin-controls" id="adminControls">
                <h3>å¼€å‘è€…è°ƒè¯•</h3>
                <div class="admin-control-row">
                    <div class="admin-control-label">å½“å‰ç­‰çº§:</div>
                    <input type="number" class="admin-control-input" id="adminLevel" min="1">
                    <button class="ios-glass-button admin-control-btn" id="setLevelBtn">è®¾ç½®ç­‰çº§</button>
                </div>
                <div class="admin-control-row">
                    <div class="admin-control-label">å½“å‰ç»éªŒ:</div>
                    <input type="number" class="admin-control-input" id="adminExp" min="0">
                    <button class="ios-glass-button admin-control-btn" id="setExpBtn">è®¾ç½®ç»éªŒ</button>
                </div>
                <div class="admin-control-row">
                    <div class="admin-control-label">æŒ‚æœºç»éªŒ/ç§’:</div>
                    <input type="number" class="admin-control-input" id="autoExpRate" min="1">
                    <button class="ios-glass-button admin-control-btn" id="setAutoExpBtn">è®¾ç½®ç»éªŒç‡</button>
                </div>
                <div class="admin-control-row">
                    <div class="admin-control-label">æ“ä½œ:</div>
                    <button class="ios-glass-button admin-control-btn" id="resetGameBtn">é‡ç½®æ¸¸æˆ</button>
                    <button class="ios-glass-button admin-control-btn" id="closeAdminBtn">å…³é—­é¢æ¿</button>
                </div>
            </div>
        </div>
    </div>

    <!-- å……å€¼ç³»ç»Ÿ -->
    <div class="recharge-overlay" id="rechargeOverlay">
        <div class="recharge-panel">
            <h2>å……å€¼ç³»ç»Ÿ</h2>
            <div class="recharge-form">
                <p style="margin-bottom: 15px; text-align: center;">å……å€¼é‡‘é¢: <span style="color: #ffcc00; font-weight: bold;">648</span></p>
                <p style="margin-bottom: 15px; text-align: center; font-size: 0.9rem;">å……å€¼æˆåŠŸå¯è·å¾—10ä¸‡ç»éªŒ</p>
                <input type="password" class="recharge-input" id="rechargePassword" placeholder="è¯·è¾“å…¥å……å€¼å¡å¯†">
                <div class="recharge-buttons">
                    <button class="ios-glass-button recharge-submit" id="rechargeSubmit">ç¡®è®¤å……å€¼</button>
                    <button class="ios-glass-button recharge-cancel" id="rechargeCancel">å–æ¶ˆ</button>
                </div>
                <div class="recharge-message" id="rechargeMessage"></div>
            </div>
        </div>
    </div>

    <!-- èƒŒåŒ…ç³»ç»Ÿ -->
    <div class="backpack-overlay" id="backpackOverlay">
        <div class="backpack-panel">
            <h2>èƒŒåŒ…ç³»ç»Ÿ</h2>
            <div class="backpack-items" id="backpackItems">
                <!-- èƒŒåŒ…ç‰©å“å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div style="margin-top: 20px;">
                <button class="ios-glass-button" id="closeBackpackBtn" style="width: 100%;">å…³é—­èƒŒåŒ…</button>
            </div>
        </div>
    </div>

    <!-- æç°ç³»ç»Ÿ -->
    <div class="withdraw-overlay" id="withdrawOverlay">
        <div class="withdraw-panel">
            <h2>æç°åˆ°å¾®ä¿¡</h2>
            <div class="withdraw-info">
                ç»éªŒå€¼å¯ä»¥æŒ‰1:1æ¯”ä¾‹å…‘æ¢æˆå¾®ä¿¡ä½™é¢
            </div>
            <div class="withdraw-form">
                <input type="number" class="withdraw-input" id="withdrawAmount" placeholder="è¯·è¾“å…¥å…‘æ¢é‡‘é¢" min="1">
                <input type="text" class="withdraw-input" id="wechatId" placeholder="è¯·è¾“å…¥æ‚¨çš„å¾®ä¿¡å·">
                <div class="withdraw-buttons">
                    <button class="ios-glass-button withdraw-submit" id="withdrawSubmit">ç¡®è®¤æç°</button>
                    <button class="ios-glass-button withdraw-cancel" id="withdrawCancel">å–æ¶ˆ</button>
                </div>
                <div class="withdraw-message" id="withdrawMessage"></div>
            </div>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€
        const gameState = {
            level: 1,
            exp: 0,
            autoMode: false,
            history: [],
            unlockedMaps: [1], // åˆå§‹è§£é”ç¬¬ä¸€ä¸ªåœ°å›¾
            activeMap: 1, // å½“å‰æ¿€æ´»çš„åœ°å›¾
            autoExpRate: 5, // æŒ‚æœºæ¨¡å¼æ¯ç§’è·å¾—çš„ç»éªŒæ•°é‡
            backpack: {
                "ç»éªŒè¯æ°´": { count: 0, description: "ä½¿ç”¨åè·å¾—1000ç»éªŒ" },
                "åŒå€ç»éªŒå¡": { count: 0, description: "1å°æ—¶å†…è·å¾—åŒå€ç»éªŒ" },
                "è‡ªåŠ¨æŒ‚æœºå¡": { count: 0, description: "è‡ªåŠ¨æŒ‚æœº1å°æ—¶" },
                "åœ°å›¾è§£é”åˆ¸": { count: 0, description: "ç«‹å³è§£é”ä¸€ä¸ªéšæœºåœ°å›¾" }
            },
            withdrawHistory: [] // æ–°å¢ï¼šæç°è®°å½•
        };

        // åœ°å›¾æ•°æ® - æ·»åŠ èƒŒæ™¯å›¾ç‰‡URL
        const mapsData = [
            { 
                id: 1, 
                name: "é•¿åŸ", 
                levelRequired: 1, 
                image: "linear-gradient(135deg, #8B4513, #D2691E)", 
                description: "ä¸‡é‡Œé•¿åŸï¼Œä¸­åæ–‡æ˜çš„è±¡å¾",
                background: "https://images.unsplash.com/photo-1508804185872-d7badad00f7d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            { 
                id: 2, 
                name: "å…µé©¬ä¿‘", 
                levelRequired: 5, 
                image: "linear-gradient(135deg, #654321, #8B4513)", 
                description: "ç§¦å§‹çš‡é™µå…µé©¬ä¿‘ï¼Œä¸–ç•Œç¬¬å…«å¤§å¥‡è¿¹",
                background: "https://images.unsplash.com/photo-1547981609-4b6bf67b21d2?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            { 
                id: 3, 
                name: "æ•…å®«", 
                levelRequired: 10, 
                image: "linear-gradient(135deg, #B22222, #DC143C)", 
                description: "ç´«ç¦åŸï¼Œæ˜æ¸…ä¸¤ä»£çš‡å®¶å®«æ®¿",
                background: "https://images.unsplash.com/photo-1599623560574-39d485900c95?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            { 
                id: 4, 
                name: "é•¿æ±Ÿä¸‰å³¡", 
                levelRequired: 15, 
                image: "linear-gradient(135deg, #1E90FF, #4169E1)", 
                description: "é•¿æ±Ÿä¸‰å³¡ï¼Œå£®ä¸½çš„è‡ªç„¶æ™¯è§‚",
                background: "https://images.unsplash.com/photo-1542662565-7e0b2a5b0b7d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            { 
                id: 5, 
                name: "é»„å±±", 
                levelRequired: 20, 
                image: "linear-gradient(135deg, #228B22, #32CD32)", 
                description: "é»„å±±ï¼Œå¤©ä¸‹ç¬¬ä¸€å¥‡å±±",
                background: "https://images.unsplash.com/photo-1518638150340-f706e86654de?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            { 
                id: 6, 
                name: "æ•¦ç…Œè«é«˜çªŸ", 
                levelRequired: 25, 
                image: "linear-gradient(135deg, #DAA520, #F4A460)", 
                description: "è«é«˜çªŸï¼Œä½›æ•™è‰ºæœ¯å®åº“",
                background: "https://images.unsplash.com/photo-1588347818125-8b8e4c6c9c0c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            { 
                id: 7, 
                name: "æ¡‚æ—å±±æ°´", 
                levelRequired: 30, 
                image: "linear-gradient(135deg, #2E8B57, #3CB371)", 
                description: "æ¡‚æ—å±±æ°´ç”²å¤©ä¸‹",
                background: "https://images.unsplash.com/photo-1542662565-7e0b2a5b0b7d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            { 
                id: 8, 
                name: "å¸ƒè¾¾æ‹‰å®«", 
                levelRequired: 35, 
                image: "linear-gradient(135deg, #800000, #B22222)", 
                description: "å¸ƒè¾¾æ‹‰å®«ï¼Œä¸–ç•Œå±‹è„Šçš„æ˜ç ",
                background: "https://images.unsplash.com/photo-1599623560574-39d485900c95?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            }
        ];

        // DOMå…ƒç´ 
        const levelElement = document.getElementById('level');
        const expElement = document.getElementById('exp');
        const currentExpElement = document.getElementById('currentExp');
        const requiredExpElement = document.getElementById('requiredExp');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const clickBtn = document.getElementById('clickBtn');
        const levelUpBtn = document.getElementById('levelUpBtn');
        const autoLevelUpBtn = document.getElementById('autoLevelUpBtn');
        const autoBtn = document.getElementById('autoBtn');
        const rechargeBtn = document.getElementById('rechargeBtn');
        const backpackBtn = document.getElementById('backpackBtn');
        const withdrawBtn = document.getElementById('withdrawBtn'); // æ–°å¢
        const autoStatus = document.getElementById('autoStatus');
        const historyLog = document.getElementById('historyLog');
        const mapsContainer = document.getElementById('mapsContainer');
        const backpackItems = document.getElementById('backpackItems');

        // ç®¡ç†å‘˜ç³»ç»ŸDOMå…ƒç´ 
        const adminOverlay = document.getElementById('adminOverlay');
        const adminPassword = document.getElementById('adminPassword');
        const adminSubmit = document.getElementById('adminSubmit');
        const adminCancel = document.getElementById('adminCancel');
        const adminMessage = document.getElementById('adminMessage');
        const passwordForm = document.getElementById('passwordForm');
        const adminControls = document.getElementById('adminControls');
        const adminLevel = document.getElementById('adminLevel');
        const adminExp = document.getElementById('adminExp');
        const autoExpRate = document.getElementById('autoExpRate');
        const setLevelBtn = document.getElementById('setLevelBtn');
        const setExpBtn = document.getElementById('setExpBtn');
        const setAutoExpBtn = document.getElementById('setAutoExpBtn');
        const resetGameBtn = document.getElementById('resetGameBtn');
        const closeAdminBtn = document.getElementById('closeAdminBtn');

        // å……å€¼ç³»ç»ŸDOMå…ƒç´ 
        const rechargeOverlay = document.getElementById('rechargeOverlay');
        const rechargePassword = document.getElementById('rechargePassword');
        const rechargeSubmit = document.getElementById('rechargeSubmit');
        const rechargeCancel = document.getElementById('rechargeCancel');
        const rechargeMessage = document.getElementById('rechargeMessage');

        // èƒŒåŒ…ç³»ç»ŸDOMå…ƒç´ 
        const backpackOverlay = document.getElementById('backpackOverlay');
        const closeBackpackBtn = document.getElementById('closeBackpackBtn');

        // æç°ç³»ç»ŸDOMå…ƒç´ 
        const withdrawOverlay = document.getElementById('withdrawOverlay');
        const withdrawAmount = document.getElementById('withdrawAmount');
        const wechatId = document.getElementById('wechatId');
        const withdrawSubmit = document.getElementById('withdrawSubmit');
        const withdrawCancel = document.getElementById('withdrawCancel');
        const withdrawMessage = document.getElementById('withdrawMessage');

        // ç®¡ç†å‘˜ç³»ç»Ÿå˜é‡
        let levelClickCount = 0;
        let levelClickTimeout;
        const ADMIN_PASSWORD = "831024";
        const RECHARGE_PASSWORD = "831024";
        let autoInterval = null;

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ¸¸æˆçŠ¶æ€
            loadGame();
            
            // ç»‘å®šäº‹ä»¶
            clickBtn.addEventListener('click', () => addExp(20));
            levelUpBtn.addEventListener('click', levelUp);
            autoLevelUpBtn.addEventListener('click', autoLevelUp);
            autoBtn.addEventListener('click', toggleAutoMode);
            rechargeBtn.addEventListener('click', showRechargePanel);
            backpackBtn.addEventListener('click', showBackpackPanel);
            withdrawBtn.addEventListener('click', showWithdrawPanel); // æ–°å¢
            
            // ç­‰çº§ç‚¹å‡»äº‹ä»¶ - ç®¡ç†å‘˜ç³»ç»Ÿå…¥å£
            levelElement.addEventListener('click', handleLevelClick);
            
            // ç®¡ç†å‘˜ç³»ç»Ÿäº‹ä»¶ç›‘å¬
            adminSubmit.addEventListener('click', checkAdminPassword);
            adminCancel.addEventListener('click', hideAdminPanel);
            setLevelBtn.addEventListener('click', setLevel);
            setExpBtn.addEventListener('click', setExp);
            setAutoExpBtn.addEventListener('click', setAutoExpRate);
            resetGameBtn.addEventListener('click', resetGame);
            closeAdminBtn.addEventListener('click', hideAdminPanel);
            
            // å……å€¼ç³»ç»Ÿäº‹ä»¶ç›‘å¬
            rechargeSubmit.addEventListener('click', checkRechargePassword);
            rechargeCancel.addEventListener('click', hideRechargePanel);
            
            // èƒŒåŒ…ç³»ç»Ÿäº‹ä»¶ç›‘å¬
            closeBackpackBtn.addEventListener('click', hideBackpackPanel);
            
            // æç°ç³»ç»Ÿäº‹ä»¶ç›‘å¬
            withdrawSubmit.addEventListener('click', processWithdraw);
            withdrawCancel.addEventListener('click', hideWithdrawPanel);
            
            // æŒ‰Enteré”®æäº¤å¯†ç 
            adminPassword.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAdminPassword();
                }
            });
            
            rechargePassword.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkRechargePassword();
                }
            });
            
            withdrawAmount.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    processWithdraw();
                }
            });
            
            // æ›´æ–°UI
            updateUI();
            renderMaps();
            
            // è®¾ç½®åˆå§‹èƒŒæ™¯
            updateBackground();
        }

        // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ¸¸æˆçŠ¶æ€
        function loadGame() {
            const savedGame = localStorage.getItem('idleGame');
            if (savedGame) {
                const parsedGame = JSON.parse(savedGame);
                gameState.level = parsedGame.level || 1;
                gameState.exp = parsedGame.exp || 0;
                gameState.history = parsedGame.history || [];
                gameState.unlockedMaps = parsedGame.unlockedMaps || [1];
                gameState.activeMap = parsedGame.activeMap || 1;
                gameState.autoExpRate = parsedGame.autoExpRate || 5;
                gameState.backpack = parsedGame.backpack || {
                    "ç»éªŒè¯æ°´": { count: 0, description: "ä½¿ç”¨åè·å¾—1000ç»éªŒ" },
                    "åŒå€ç»éªŒå¡": { count: 0, description: "1å°æ—¶å†…è·å¾—åŒå€ç»éªŒ" },
                    "è‡ªåŠ¨æŒ‚æœºå¡": { count: 0, description: "è‡ªåŠ¨æŒ‚æœº1å°æ—¶" },
                    "åœ°å›¾è§£é”åˆ¸": { count: 0, description: "ç«‹å³è§£é”ä¸€ä¸ªéšæœºåœ°å›¾" }
                };
                gameState.withdrawHistory = parsedGame.withdrawHistory || []; // æ–°å¢
                
                // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
                updateHistory();
            }
        }

        // ä¿å­˜æ¸¸æˆçŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
        function saveGame() {
            localStorage.setItem('idleGame', JSON.stringify(gameState));
        }

        // æ›´æ–°UIæ˜¾ç¤º
        function updateUI() {
            levelElement.textContent = gameState.level;
            expElement.textContent = gameState.exp;
            currentExpElement.textContent = gameState.exp;
            requiredExpElement.textContent = getRequiredExp();
            
            // æ›´æ–°è¿›åº¦æ¡
            const progressPercent = (gameState.exp / getRequiredExp()) * 100;
            progressBar.style.width = `${Math.min(progressPercent, 100)}%`;
            progressText.textContent = `${Math.min(Math.round(progressPercent), 100)}%`;
            
            // æ›´æ–°å‡çº§æŒ‰é’®çŠ¶æ€
            levelUpBtn.disabled = gameState.exp < getRequiredExp();
            levelUpBtn.textContent = gameState.exp >= getRequiredExp() 
                ? `å‡çº§ (æ¶ˆè€—${getRequiredExp()}ç»éªŒ)` 
                : `å‡çº§ (éœ€è¦${getRequiredExp()}ç»éªŒ)`;
                
            // æ›´æ–°ä¸€é”®å‡çº§æŒ‰é’®çŠ¶æ€
            autoLevelUpBtn.disabled = gameState.exp < 100;
            autoLevelUpBtn.textContent = `ä¸€é”®å‡çº§ (å¯å‡${Math.floor(gameState.exp / 100)}çº§)`;
                
            // æ›´æ–°æŒ‚æœºæŒ‰é’®çŠ¶æ€
            autoBtn.textContent = gameState.autoMode ? 'å…³é—­æŒ‚æœºæ¨¡å¼' : 'å¼€å¯æŒ‚æœºæ¨¡å¼';
            autoStatus.textContent = gameState.autoMode 
                ? `æŒ‚æœºæ¨¡å¼è¿è¡Œä¸­... æ¯ç§’è·å¾—${gameState.autoExpRate}ç‚¹ç»éªŒ` 
                : 'æŒ‚æœºæ¨¡å¼æœªå¼€å¯';
                
            if (gameState.autoMode) {
                autoStatus.classList.add('active');
            } else {
                autoStatus.classList.remove('active');
            }
        }

        // è®¡ç®—å½“å‰ç­‰çº§éœ€è¦çš„ç»éªŒå€¼
        function getRequiredExp() {
            return 100; // æ¯çº§å›ºå®šéœ€è¦100ç»éªŒ
        }

        // æ·»åŠ ç»éªŒ
        function addExp(amount) {
            gameState.exp += amount;
            addToHistory(`è·å¾—äº† ${amount} ç‚¹ç»éªŒ`);
            updateUI();
            saveGame();
        }

        // å‡çº§
        function levelUp() {
            if (gameState.exp >= getRequiredExp()) {
                const oldLevel = gameState.level;
                gameState.exp -= getRequiredExp();
                gameState.level++;
                addToHistory(`å‡çº§åˆ° ${gameState.level} çº§ï¼`);
                
                // æ£€æŸ¥æ˜¯å¦æœ‰æ–°åœ°å›¾è§£é”
                checkMapUnlocks(oldLevel);
                
                updateUI();
                renderMaps();
                saveGame();
            }
        }

        // ä¸€é”®å‡çº§åŠŸèƒ½
        function autoLevelUp() {
            if (gameState.exp < 100) return;
            
            const oldLevel = gameState.level;
            const levelsToUpgrade = Math.floor(gameState.exp / 100);
            gameState.level += levelsToUpgrade;
            gameState.exp = gameState.exp % 100;
            
            addToHistory(`ä¸€é”®å‡çº§ï¼ä» ${oldLevel} çº§å‡åˆ° ${gameState.level} çº§`);
            
            // æ£€æŸ¥æ˜¯å¦æœ‰æ–°åœ°å›¾è§£é”
            checkMapUnlocks(oldLevel);
            
            updateUI();
            renderMaps();
            saveGame();
        }

        // æ£€æŸ¥åœ°å›¾è§£é”
        function checkMapUnlocks(oldLevel) {
            mapsData.forEach(map => {
                // å¦‚æœç©å®¶è¾¾åˆ°åœ°å›¾æ‰€éœ€ç­‰çº§ï¼Œå¹¶ä¸”ä¹‹å‰æ²¡æœ‰è§£é”
                if (gameState.level >= map.levelRequired && 
                    oldLevel < map.levelRequired && 
                    !gameState.unlockedMaps.includes(map.id)) {
                    
                    gameState.unlockedMaps.push(map.id);
                    addToHistory(`è§£é”äº†æ–°åœ°å›¾: ${map.name}ï¼`);
                }
            });
        }

        // æ¸²æŸ“åœ°å›¾å¡ç‰‡
        function renderMaps() {
            mapsContainer.innerHTML = '';
            
            mapsData.forEach(map => {
                const isUnlocked = gameState.unlockedMaps.includes(map.id);
                const isActive = gameState.activeMap === map.id;
                const mapCard = document.createElement('div');
                mapCard.className = `ios-map-card ${isUnlocked ? 'unlocked' : 'locked'} ${isActive ? 'active' : ''}`;
                
                mapCard.innerHTML = `
                    <div class="map-image" style="background: ${map.image}"></div>
                    <div class="map-info">
                        <div class="map-name">${map.name}</div>
                        <div class="map-level">éœ€è¦ç­‰çº§: ${map.levelRequired}</div>
                    </div>
                    ${!isUnlocked ? '<div class="lock-icon">ğŸ”’</div>' : ''}
                `;
                
                // ä¸ºå·²è§£é”çš„åœ°å›¾æ·»åŠ ç‚¹å‡»äº‹ä»¶
                if (isUnlocked) {
                    mapCard.addEventListener('click', () => selectMap(map.id));
                }
                
                mapsContainer.appendChild(mapCard);
            });
        }

        // é€‰æ‹©åœ°å›¾
        function selectMap(mapId) {
            gameState.activeMap = mapId;
            updateBackground();
            renderMaps();
            saveGame();
            addToHistory(`åˆ‡æ¢åˆ°äº† ${mapsData.find(map => map.id === mapId).name} èƒŒæ™¯`);
        }

        // æ›´æ–°èƒŒæ™¯
        function updateBackground() {
            const activeMap = mapsData.find(map => map.id === gameState.activeMap);
            if (activeMap) {
                document.body.style.backgroundImage = `url('${activeMap.background}')`;
            }
        }

        // åˆ‡æ¢æŒ‚æœºæ¨¡å¼
        function toggleAutoMode() {
            gameState.autoMode = !gameState.autoMode;
            
            if (gameState.autoMode) {
                addToHistory(`å¼€å¯äº†æŒ‚æœºæ¨¡å¼ (${gameState.autoExpRate}ç»éªŒ/ç§’)`);
                autoInterval = setInterval(() => {
                    addExp(gameState.autoExpRate);
                }, 1000);
            } else {
                addToHistory('å…³é—­äº†æŒ‚æœºæ¨¡å¼');
                if (autoInterval) {
                    clearInterval(autoInterval);
                    autoInterval = null;
                }
            }
            
            updateUI();
        }

        // æ·»åŠ åˆ°å†å²è®°å½•
        function addToHistory(message) {
            const timestamp = new Date().toLocaleTimeString();
            gameState.history.unshift(`${timestamp}: ${message}`);
            
            // é™åˆ¶å†å²è®°å½•æ•°é‡
            if (gameState.history.length > 10) {
                gameState.history.pop();
            }
            
            updateHistory();
        }

        // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
        function updateHistory() {
            historyLog.innerHTML = '';
            gameState.history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.textContent = item;
                historyLog.appendChild(historyItem);
            });
        }

        // ç®¡ç†å‘˜ç³»ç»ŸåŠŸèƒ½
        function handleLevelClick() {
            levelClickCount++;
            
            // æ¸…é™¤ä¹‹å‰çš„è¶…æ—¶
            if (levelClickTimeout) {
                clearTimeout(levelClickTimeout);
            }
            
            // è®¾ç½®æ–°çš„è¶…æ—¶
            levelClickTimeout = setTimeout(() => {
                levelClickCount = 0;
            }, 2000); // 2ç§’å†…è¿ç»­ç‚¹å‡»
            
            // å¦‚æœè¿ç»­ç‚¹å‡»5æ¬¡ï¼Œæ˜¾ç¤ºç®¡ç†å‘˜é¢æ¿
            if (levelClickCount >= 5) {
                showAdminPanel();
                levelClickCount = 0;
            }
        }

        function showAdminPanel() {
            adminOverlay.style.display = 'flex';
            adminPassword.focus();
        }

        function hideAdminPanel() {
            adminOverlay.style.display = 'none';
            adminPassword.value = '';
            adminMessage.textContent = '';
            adminMessage.className = 'admin-message';
            adminMessage.style.display = 'none';
            passwordForm.style.display = 'flex';
            adminControls.style.display = 'none';
            levelClickCount = 0;
        }

        function checkAdminPassword() {
            const password = adminPassword.value.trim();
            
            if (password === ADMIN_PASSWORD) {
                // å¯†ç æ­£ç¡®ï¼Œæ˜¾ç¤ºç®¡ç†å‘˜æ§åˆ¶é¢æ¿
                passwordForm.style.display = 'none';
                adminControls.style.display = 'block';
                
                // å¡«å……å½“å‰æ•°æ®
                adminLevel.value = gameState.level;
                adminExp.value = gameState.exp;
                autoExpRate.value = gameState.autoExpRate;
                
                addToHistory('è¿›å…¥äº†ç®¡ç†å‘˜æ¨¡å¼');
            } else {
                // å¯†ç é”™è¯¯
                adminMessage.textContent = 'å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ï¼';
                adminMessage.className = 'admin-message admin-error';
                adminMessage.style.display = 'block';
                adminPassword.value = '';
                adminPassword.focus();
            }
        }

        function setLevel() {
            const newLevel = parseInt(adminLevel.value);
            if (newLevel >= 1) {
                const oldLevel = gameState.level;
                gameState.level = newLevel;
                
                // æ£€æŸ¥æ˜¯å¦æœ‰æ–°åœ°å›¾è§£é”
                checkMapUnlocks(oldLevel);
                
                updateUI();
                renderMaps();
                saveGame();
                
                adminMessage.textContent = `ç­‰çº§å·²è®¾ç½®ä¸º ${newLevel}`;
                adminMessage.className = 'admin-message admin-success';
                adminMessage.style.display = 'block';
                
                addToHistory(`ç®¡ç†å‘˜å°†ç­‰çº§è®¾ç½®ä¸º ${newLevel}`);
            } else {
                adminMessage.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç­‰çº§';
                adminMessage.className = 'admin-message admin-error';
                adminMessage.style.display = 'block';
            }
        }

        function setExp() {
            const newExp = parseInt(adminExp.value);
            if (newExp >= 0) {
                gameState.exp = newExp;
                updateUI();
                saveGame();
                
                adminMessage.textContent = `ç»éªŒå€¼å·²è®¾ç½®ä¸º ${newExp}`;
                adminMessage.className = 'admin-message admin-success';
                adminMessage.style.display = 'block';
                
                addToHistory(`ç®¡ç†å‘˜å°†ç»éªŒå€¼è®¾ç½®ä¸º ${newExp}`);
            } else {
                adminMessage.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç»éªŒå€¼';
                adminMessage.className = 'admin-message admin-error';
                adminMessage.style.display = 'block';
            }
        }

        function setAutoExpRate() {
            const newRate = parseInt(autoExpRate.value);
            if (newRate >= 1) {
                gameState.autoExpRate = newRate;
                updateUI();
                saveGame();
                
                adminMessage.textContent = `æŒ‚æœºç»éªŒç‡å·²è®¾ç½®ä¸º ${newRate}/ç§’`;
                adminMessage.className = 'admin-message admin-success';
                adminMessage.style.display = 'block';
                
                addToHistory(`ç®¡ç†å‘˜å°†æŒ‚æœºç»éªŒç‡è®¾ç½®ä¸º ${newRate}/ç§’`);
            } else {
                adminMessage.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç»éªŒç‡';
                adminMessage.className = 'admin-message admin-error';
                adminMessage.style.display = 'block';
            }
        }

        function resetGame() {
            if (confirm('ç¡®å®šè¦é‡ç½®æ¸¸æˆå—ï¼Ÿæ‰€æœ‰è¿›åº¦å°†ä¸¢å¤±ï¼')) {
                gameState.level = 1;
                gameState.exp = 0;
                gameState.autoMode = false;
                gameState.history = [];
                gameState.unlockedMaps = [1];
                gameState.activeMap = 1;
                gameState.autoExpRate = 5;
                gameState.backpack = {
                    "ç»éªŒè¯æ°´": { count: 0, description: "ä½¿ç”¨åè·å¾—1000ç»éªŒ" },
                    "åŒå€ç»éªŒå¡": { count: 0, description: "1å°æ—¶å†…è·å¾—åŒå€ç»éªŒ" },
                    "è‡ªåŠ¨æŒ‚æœºå¡": { count: 0, description: "è‡ªåŠ¨æŒ‚æœº1å°æ—¶" },
                    "åœ°å›¾è§£é”åˆ¸": { count: 0, description: "ç«‹å³è§£é”ä¸€ä¸ªéšæœºåœ°å›¾" }
                };
                gameState.withdrawHistory = []; // é‡ç½®æç°è®°å½•
                
                // æ¸…é™¤æŒ‚æœºå®šæ—¶å™¨
                if (autoInterval) {
                    clearInterval(autoInterval);
                    autoInterval = null;
                }
                
                updateUI();
                renderMaps();
                updateHistory();
                updateBackground();
                saveGame();
                
                adminMessage.textContent = 'æ¸¸æˆå·²é‡ç½®';
                adminMessage.className = 'admin-message admin-success';
                adminMessage.style.display = 'block';
                
                addToHistory('ç®¡ç†å‘˜é‡ç½®äº†æ¸¸æˆ');
            }
        }

        // å……å€¼ç³»ç»ŸåŠŸèƒ½
        function showRechargePanel() {
            rechargeOverlay.style.display = 'flex';
            rechargePassword.focus();
        }

        function hideRechargePanel() {
            rechargeOverlay.style.display = 'none';
            rechargePassword.value = '';
            rechargeMessage.textContent = '';
            rechargeMessage.className = 'recharge-message';
            rechargeMessage.style.display = 'none';
        }

        function checkRechargePassword() {
            const password = rechargePassword.value.trim();
            
            if (password === RECHARGE_PASSWORD) {
                // å¯†ç æ­£ç¡®ï¼Œå……å€¼æˆåŠŸ
                addExp(100000);
                gameState.backpack["ç»éªŒè¯æ°´"].count += 5;
                gameState.backpack["åŒå€ç»éªŒå¡"].count += 2;
                gameState.backpack["è‡ªåŠ¨æŒ‚æœºå¡"].count += 3;
                gameState.backpack["åœ°å›¾è§£é”åˆ¸"].count += 1;
                
                updateUI();
                saveGame();
                
                rechargeMessage.textContent = 'å……å€¼æˆåŠŸï¼è·å¾—10ä¸‡ç»éªŒå’Œé“å…·ç¤¼åŒ…ï¼';
                rechargeMessage.className = 'recharge-message recharge-success';
                rechargeMessage.style.display = 'block';
                
                addToHistory('å……å€¼æˆåŠŸï¼Œè·å¾—10ä¸‡ç»éªŒå’Œé“å…·ç¤¼åŒ…');
                
                // 3ç§’åè‡ªåŠ¨å…³é—­
                setTimeout(() => {
                    hideRechargePanel();
                }, 3000);
            } else {
                // å¯†ç é”™è¯¯
                rechargeMessage.textContent = 'å¡å¯†é”™è¯¯ï¼Œè¯·é‡è¯•ï¼';
                rechargeMessage.className = 'recharge-message recharge-error';
                rechargeMessage.style.display = 'block';
                rechargePassword.value = '';
                rechargePassword.focus();
            }
        }

        // èƒŒåŒ…ç³»ç»ŸåŠŸèƒ½
        function showBackpackPanel() {
            renderBackpackItems();
            backpackOverlay.style.display = 'flex';
        }

        function hideBackpackPanel() {
            backpackOverlay.style.display = 'none';
        }

        function renderBackpackItems() {
            backpackItems.innerHTML = '';
            
            for (const [itemName, itemData] of Object.entries(gameState.backpack)) {
                const itemElement = document.createElement('div');
                itemElement.className = 'backpack-item';
                
                // æ ¹æ®ç‰©å“åç§°è®¾ç½®å›¾æ ‡
                let icon = "ğŸ“¦";
                if (itemName === "ç»éªŒè¯æ°´") icon = "ğŸ§ª";
                else if (itemName === "åŒå€ç»éªŒå¡") icon = "âœ¨";
                else if (itemName === "è‡ªåŠ¨æŒ‚æœºå¡") icon = "â±ï¸";
                else if (itemName === "åœ°å›¾è§£é”åˆ¸") icon = "ğŸ«";
                
                itemElement.innerHTML = `
                    <div class="item-icon">${icon}</div>
                    <div class="item-name">${itemName}</div>
                    <div class="item-count">æ•°é‡: ${itemData.count}</div>
                `;
                
                backpackItems.appendChild(itemElement);
            }
        }

        // æç°ç³»ç»ŸåŠŸèƒ½
        function showWithdrawPanel() {
            withdrawOverlay.style.display = 'flex';
            withdrawAmount.focus();
        }

        function hideWithdrawPanel() {
            withdrawOverlay.style.display = 'none';
            withdrawAmount.value = '';
            wechatId.value = '';
            withdrawMessage.textContent = '';
            withdrawMessage.className = 'withdraw-message';
            withdrawMessage.style.display = 'none';
        }

        function processWithdraw() {
            const amount = parseInt(withdrawAmount.value);
            const id = wechatId.value.trim();
            
            // éªŒè¯è¾“å…¥
            if (!amount || amount < 1) {
                withdrawMessage.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„å…‘æ¢é‡‘é¢';
                withdrawMessage.className = 'withdraw-message withdraw-error';
                withdrawMessage.style.display = 'block';
                return;
            }
            
            if (!id) {
                withdrawMessage.textContent = 'è¯·è¾“å…¥å¾®ä¿¡å·';
                withdrawMessage.className = 'withdraw-message withdraw-error';
                withdrawMessage.style.display = 'block';
                return;
            }
            
            // æ£€æŸ¥ç»éªŒå€¼æ˜¯å¦è¶³å¤Ÿ
            if (gameState.exp < amount) {
                withdrawMessage.textContent = `ç»éªŒå€¼ä¸è¶³ï¼å½“å‰ç»éªŒå€¼: ${gameState.exp}`;
                withdrawMessage.className = 'withdraw-message withdraw-error';
                withdrawMessage.style.display = 'block';
                return;
            }
            
            // æ‰§è¡Œå…‘æ¢
            gameState.exp -= amount;
            
            // è®°å½•æç°å†å²
            const timestamp = new Date().toLocaleString();
            gameState.withdrawHistory.unshift({
                amount: amount,
                wechatId: id,
                timestamp: timestamp
            });
            
            // é™åˆ¶æç°è®°å½•æ•°é‡
            if (gameState.withdrawHistory.length > 20) {
                gameState.withdrawHistory.pop();
            }
            
            // æ›´æ–°UIå’Œä¿å­˜æ¸¸æˆ
            updateUI();
            saveGame();
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            withdrawMessage.textContent = `æç°æˆåŠŸï¼${amount}ç»éªŒå·²å…‘æ¢ä¸º${amount}å…ƒå¾®ä¿¡ä½™é¢ï¼Œå°†è½¬å…¥å¾®ä¿¡å·: ${id}`;
            withdrawMessage.className = 'withdraw-message withdraw-success';
            withdrawMessage.style.display = 'block';
            
            // æ·»åŠ åˆ°å†å²è®°å½•
            addToHistory(`æç°æˆåŠŸï¼${amount}ç»éªŒå…‘æ¢ä¸º${amount}å…ƒå¾®ä¿¡ä½™é¢`);
            
            // 3ç§’åè‡ªåŠ¨å…³é—­
            setTimeout(() => {
                hideWithdrawPanel();
            }, 3000);
        }

        // å¯åŠ¨æ¸¸æˆ
        initGame();
    </script>
</body>
</html>